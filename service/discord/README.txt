This code comes from a Deno / supabase environment, and has been copied "in place"